<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">

  <title> Resource Manager on the command line - Gmagon Software - handy and professional Mac apps.</title>

  <meta http-equiv="X-UA-Compatible" content="IE=8; IE=9; IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="robots" content="noodp" />
  <meta name="keywords" content=" Resource Manager on the command line" />
  <meta name="description" content=" Resource Manager on the command line" />

  <!-- Custom config og:image -->


  <!-- Open Graph -->
<meta name="description" content="Resource Manager on the command line - Gmagon Software - handy and professional Mac apps.">
<meta property="og:type" content="apps">
<meta property="og:title" content=" Resource Manager on the command line - Gmagon Software - handy and professional Mac apps.">
<meta property="og:url" content="https://gmagon.com/blog/2017/08/21/resource-manager-on-the-command-line/index.html">
<meta property="og:site_name" content=" Resource Manager on the command line - Gmagon Software - handy and professional Mac apps.">
<meta property="og:description" content="Resource Manager on the command line - Gmagon Software - handy and professional Mac apps.">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://img0.tuicool.com/J36RFv6.png!web">
<meta property="og:updated_time" content="2017-08-21T12:16:55.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content=" Resource Manager on the command line - Gmagon Software - handy and professional Mac apps.">
<meta name="twitter:description" content="Resource Manager on the command line - Gmagon Software - handy and professional Mac apps.">
<meta name="twitter:image" content="http://img0.tuicool.com/J36RFv6.png!web">
<meta name="twitter:site" content="gmagonshare">
<meta property="fb:admins" content="432634277117208">
<meat name="twitter:url" content="https://gmagon.com/blog/2017/08/21/resource-manager-on-the-command-line/index.html">



  <!-- algolia_config -->
  
  
  <!-- Canonical links -->
  <link rel="canonical" href="https://gmagon.com/blog/2017/08/21/resource-manager-on-the-command-line/index.html">

  <!-- Alternative links -->
  

  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">

  <!-- CSS -->
  <link rel="stylesheet" href="/build/css/navy-3ff4298f58.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/asset/styles/global.css">
  
  <!-- jQuery -->
  <script src="/js/jquery/jquery-3.2.1.min.js"></script>
<script src="/js/jquery/jquery-migrate-1.4.1.min.js"></script>



  <!-- ForPostLayout -->
  
    
    
  
  <!-- endForPostLayout -->

  <!-- RSS -->
  <link rel="alternate" href="/atom.xml" title="Gmagon Software - handy and professional Mac apps.">

  <!-- algolia_search -->
  <script src="/assets/algolia/algoliasearchLite.min.js" async></script>

  <!-- Github Button -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  <!-- Utils -->
<script src="/js/utils.js"></script>
</head>

<body>
  <div id="container">
    <header id="header">
  <div class="wrapper">
    <div id="header-inner" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Gmagon Software - handy and professional Mac apps.</a>
        <span>gmagon </span>
      </h1>
      <nav id="main-nav">
        <a href="/" class="main-nav-link ">Home</a><a href="/products/" class="main-nav-link ">Products</a><a href="/guide/" class="main-nav-link ">Guide</a><a href="/support/" class="main-nav-link ">Support</a><a href="/blog/" class="main-nav-link ">Blog</a>
        <div id="search-input-wrap">
          <a href="/search/" class="text-decoration-none">
            <div id="search-input-icon">
              <i class="fa fa-search"></i>
            </div>
          </a>
        </div>
      </nav>
      <div id="lang-select-wrap">
        <label id="lang-select-label"><i class="fa fa-globe"></i><span>English</span></label>
        <select id="lang-select" data-canonical="">
          
            <option value="en" selected>English</option>
          
        </select>
      </div>
      <a id="mobile-nav-toggle">
        <span class="mobile-nav-toggle-bar"></span>
        <span class="mobile-nav-toggle-bar"></span>
        <span class="mobile-nav-toggle-bar"></span>
      </a>
    </div>
  </div>  
</header>
<div class="hide-wrap-head-top"></div>

    <div class="class-content-wrap">
  <div class="inner">
    <div class="inner-wrap fill-bunting font-e3">
      <h2 id="banner-title">  Resource Manager on the command line </h2>
      <div id="banner-start">
        <a class="btn btn-static-secondary btn-shadow" href="https://gitter.im/Gmagon/support" ttarget="_blank" rel="nofollow me noopener noreferrer" >Need help?</a>
      </div>
    </div>
  </div>
</div>

<div class="class-content-wrap">
  <div class="wrapper">
    <div class="inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
          <div class="hide-wrap-head-top"></div>
<article class="article post" itemscope itemtype="http://schema.org/Article">
  <header class="article-header">
    
      <h1 class="article-title" itemprop="name"> Resource Manager on the command line</h1>
    
    <a href="/blog/2017/08/21/resource-manager-on-the-command-line/" class="article-date"><time datetime="2017-08-21T00:00:00.000Z">2017-08-21</time></a>
  </header>
  <div class="article-content" itemprop="articleBody">
    <p><img src="http://img0.tuicool.com/J36RFv6.png!web" alt=""></p>
<p>This article contains a complete working example for the Resource Manager on the command line for those of you who can’t use the Enterprise Manager fort it. Believe me, I feel your pain :wink:</p>
<p>As a good practice, PL/SQL procedures should be using DBMS_APPLICATION_INFO to mark their modules and actions. Not only for monitoring purpose but also to provide a way to tweak the system if things start going ugly in terms of performance. Here’s where the Resource Manager steps in.</p>
<p>Sessions can be assigned to different consumer groups depending on the module. Say we have an application with certain modules that sometimes consume an awful lot of CPU resources or way too much parallel processes. When the problem surfaces, you may not have enough time to fix the coding because it’s a live production run. The mentioned tweak – if prepared beforehand – may save the day. Let’s look at an example:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"> </div><div class="line">BEGIN</div><div class="line">  DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();</div><div class="line"></div><div class="line">  DBMS_RESOURCE_MANAGER.SET_CONSUMER_GROUP_MAPPING_PRI(</div><div class="line">    EXPLICIT =</div><div class="line">&gt;</div><div class="line">1</div><div class="line">,</div><div class="line">    SERVICE_MODULE_ACTION =</div><div class="line">&gt;</div><div class="line">2</div><div class="line">,</div><div class="line">    SERVICE_MODULE =</div><div class="line">&gt;</div><div class="line">3</div><div class="line">,</div><div class="line">    MODULE_NAME_ACTION =</div><div class="line">&gt;</div><div class="line">4</div><div class="line">,</div><div class="line">    MODULE_NAME =</div><div class="line">&gt;</div><div class="line">5</div><div class="line">,</div><div class="line">    SERVICE_NAME =</div><div class="line">&gt;</div><div class="line">6</div><div class="line">,</div><div class="line">    ORACLE_USER =</div><div class="line">&gt;</div><div class="line">7</div><div class="line">,</div><div class="line">    CLIENT_PROGRAM =</div><div class="line">&gt;</div><div class="line">8</div><div class="line">,</div><div class="line">    CLIENT_OS_USER =</div><div class="line">&gt;</div><div class="line">9</div><div class="line">,</div><div class="line">    CLIENT_MACHINE =</div><div class="line">&gt;</div><div class="line">10</div><div class="line">,</div><div class="line">    CLIENT_ID =</div><div class="line">&gt;</div><div class="line">11</div><div class="line">);</div><div class="line"></div><div class="line">  DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();</div><div class="line">  DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();</div><div class="line">  DBMS_RESOURCE_MANAGER.CLEAR_PENDING_AREA();</div><div class="line">END;</div><div class="line">/</div></pre></td></tr></table></figure>
<p>The above set the priority of MODULE_NAME over ORACLE_USER, which is not the default. The state of the priorities can be seen in DBA_RSRC_MAPPING_PRIORITY. Now I create two consumer groups:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">BEGIN</div><div class="line">DBMS_RESOURCE_MANAGER</div><div class="line">.CREATE_PENDING_AREA</div><div class="line">();</div><div class="line"></div><div class="line">  </div><div class="line">DBMS_RESOURCE_MANAGER</div><div class="line">.CREATE_CONSUMER_GROUP</div><div class="line"> (</div><div class="line">     CONSUMER_GROUP =</div><div class="line">&gt;</div><div class="line">&apos;A_GROUP&apos;</div><div class="line">,</div><div class="line">     COMMENT        =</div><div class="line">&gt;</div><div class="line">&apos;A Group&apos;</div><div class="line">);</div><div class="line"></div><div class="line">  </div><div class="line">DBMS_RESOURCE_MANAGER</div><div class="line">.CREATE_CONSUMER_GROUP</div><div class="line"> (</div><div class="line">     CONSUMER_GROUP =</div><div class="line">&gt;</div><div class="line">&apos;B_GROUP&apos;</div><div class="line">,</div><div class="line">     COMMENT        =</div><div class="line">&gt;</div><div class="line">&apos;B Group&apos;</div><div class="line">);</div><div class="line"></div><div class="line">  </div><div class="line">DBMS_RESOURCE_MANAGER</div><div class="line">.VALIDATE_PENDING_AREA</div><div class="line">();</div><div class="line">  </div><div class="line">DBMS_RESOURCE_MANAGER</div><div class="line">.SUBMIT_PENDING_AREA</div><div class="line">();</div><div class="line">  </div><div class="line">DBMS_RESOURCE_MANAGER</div><div class="line">.CLEAR_PENDING_AREA</div><div class="line">();</div><div class="line"></div><div class="line">END</div><div class="line">;</div><div class="line">/</div></pre></td></tr></table></figure>
<p>My demo user ADAM gets the right to be a member of these consumer groups:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">BEGIN</div><div class="line">  DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();</div><div class="line"></div><div class="line">  DBMS_RESOURCE_MANAGER_PRIVS.GRANT_SWITCH_CONSUMER_GROUP (</div><div class="line">   GRANTEE_NAME   =</div><div class="line">&gt;</div><div class="line">&apos;ADAM&apos;</div><div class="line">,</div><div class="line">   CONSUMER_GROUP =</div><div class="line">&gt;</div><div class="line">&apos;A_GROUP&apos;</div><div class="line">,</div><div class="line">   GRANT_OPTION   =</div><div class="line">&gt;</div><div class="line">FALSE</div><div class="line">);</div><div class="line"></div><div class="line">  DBMS_RESOURCE_MANAGER_PRIVS.GRANT_SWITCH_CONSUMER_GROUP (</div><div class="line">   GRANTEE_NAME   =</div><div class="line">&gt;</div><div class="line">&apos;ADAM&apos;</div><div class="line">,</div><div class="line">   CONSUMER_GROUP =</div><div class="line">&gt;</div><div class="line">&apos;B_GROUP&apos;</div><div class="line">,</div><div class="line">   GRANT_OPTION   =</div><div class="line">&gt;</div><div class="line">FALSE</div><div class="line">);</div><div class="line"></div><div class="line">  DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();</div><div class="line">  DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();</div><div class="line">  DBMS_RESOURCE_MANAGER.CLEAR_PENDING_AREA();</div><div class="line">END;</div><div class="line">/</div></pre></td></tr></table></figure>
<p>Now the part where consumer group and module is combined respectively mapped:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">BEGIN</div><div class="line">DBMS_RESOURCE_MANAGER</div><div class="line">.CREATE_PENDING_AREA</div><div class="line">();</div><div class="line"></div><div class="line">  </div><div class="line">DBMS_RESOURCE_MANAGER</div><div class="line">.SET_CONSUMER_GROUP_MAPPING</div><div class="line"></div><div class="line">     (DBMS_RESOURCE_MANAGER.MODULE_NAME, </div><div class="line">&apos;A_MODULE&apos;</div><div class="line">, </div><div class="line">&apos;A_GROUP&apos;</div><div class="line">);</div><div class="line"></div><div class="line">  </div><div class="line">DBMS_RESOURCE_MANAGER</div><div class="line">.SET_CONSUMER_GROUP_MAPPING</div><div class="line"></div><div class="line">     (DBMS_RESOURCE_MANAGER.MODULE_NAME, </div><div class="line">&apos;B_MODULE&apos;</div><div class="line">, </div><div class="line">&apos;B_GROUP&apos;</div><div class="line">);</div><div class="line"></div><div class="line">  </div><div class="line">DBMS_RESOURCE_MANAGER</div><div class="line">.VALIDATE_PENDING_AREA</div><div class="line">();</div><div class="line">  </div><div class="line">DBMS_RESOURCE_MANAGER</div><div class="line">.SUBMIT_PENDING_AREA</div><div class="line">();</div><div class="line">  </div><div class="line">DBMS_RESOURCE_MANAGER</div><div class="line">.CLEAR_PENDING_AREA</div><div class="line">();</div><div class="line"></div><div class="line">END</div><div class="line">;</div><div class="line">/</div></pre></td></tr></table></figure>
<p>Next comes the Resource Manager Plan. The restrictions are a bit rigid to show an obvious effect – 95 to 5 percent favors Group A very much over Group B:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">BEGIN</div><div class="line">  DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();</div><div class="line"></div><div class="line">  DBMS_RESOURCE_MANAGER.CREATE_PLAN(</div><div class="line">     PLAN    =</div><div class="line">&gt;</div><div class="line">&apos;TESTPLAN&apos;</div><div class="line">,</div><div class="line">     COMMENT =</div><div class="line">&gt;</div><div class="line">&apos;test&apos;</div><div class="line">);</div><div class="line"></div><div class="line">  DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE (</div><div class="line">     PLAN                     =</div><div class="line">&gt;</div><div class="line">&apos;MYPLAN&apos;</div><div class="line">, </div><div class="line">     GROUP_OR_SUBPLAN         =</div><div class="line">&gt;</div><div class="line">&apos;SYS_GROUP&apos;</div><div class="line">,    </div><div class="line">/* built-in group */</div><div class="line"></div><div class="line">     COMMENT                  =</div><div class="line">&gt;</div><div class="line">&apos;SYS Group&apos;</div><div class="line">,</div><div class="line">     MGMT_P1                  =</div><div class="line">&gt;</div><div class="line">100</div><div class="line">);</div><div class="line"></div><div class="line">  DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE (</div><div class="line">     PLAN                     =</div><div class="line">&gt;</div><div class="line">&apos;MYPLAN&apos;</div><div class="line">, </div><div class="line">     GROUP_OR_SUBPLAN         =</div><div class="line">&gt;</div><div class="line">&apos;A_GROUP&apos;</div><div class="line">,</div><div class="line">     COMMENT                  =</div><div class="line">&gt;</div><div class="line">&apos;A GROUP&apos;</div><div class="line">,</div><div class="line">     parallel_degree_limit_p1 =</div><div class="line">&gt;</div><div class="line">8</div><div class="line"> ,          </div><div class="line">/* RESTRICTION HERE */</div><div class="line"></div><div class="line">     MGMT_P2                  =</div><div class="line">&gt;</div><div class="line">95</div><div class="line">);</div><div class="line"></div><div class="line">  DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE (</div><div class="line">     PLAN                     =</div><div class="line">&gt;</div><div class="line">&apos;MYPLAN&apos;</div><div class="line">, </div><div class="line">     GROUP_OR_SUBPLAN         =</div><div class="line">&gt;</div><div class="line">&apos;B_GROUP&apos;</div><div class="line">,</div><div class="line">     COMMENT                  =</div><div class="line">&gt;</div><div class="line">&apos;B GROUP&apos;</div><div class="line">,</div><div class="line">      parallel_degree_limit_p1 =</div><div class="line">&gt;</div><div class="line">2</div><div class="line"> ,          </div><div class="line">/* RESTRICTION HERE */</div><div class="line"></div><div class="line">      MGMT_P2                  =</div><div class="line">&gt;</div><div class="line">5</div><div class="line">);</div><div class="line"></div><div class="line">  DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE (</div><div class="line">     PLAN                     =</div><div class="line">&gt;</div><div class="line">&apos;MYPLAN&apos;</div><div class="line">, </div><div class="line">     GROUP_OR_SUBPLAN         =</div><div class="line">&gt;</div><div class="line">&apos;OTHER_GROUPS&apos;</div><div class="line">, </div><div class="line">/* built-in group */</div><div class="line"></div><div class="line">     COMMENT                  =</div><div class="line">&gt;</div><div class="line">&apos;Others&apos;</div><div class="line">,</div><div class="line">     MGMT_P3                  =</div><div class="line">&gt;</div><div class="line">100</div><div class="line">);</div><div class="line"></div><div class="line">  DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();</div><div class="line">  DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();</div><div class="line">  DBMS_RESOURCE_MANAGER.CLEAR_PENDING_AREA();</div><div class="line"></div><div class="line">END;</div><div class="line">/</div></pre></td></tr></table></figure>
<p>So far, no restriction is in place, because the plan is not yet active. But everything is now prepared. Should Module B consume too much CPU or demand too much parallel processes, the plan can be set with this :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">BEGIN</div><div class="line"></div><div class="line">    DBMS_RESOURCE_MANAGER.SWITCH_PLAN(plan_name =</div><div class="line">&gt;</div><div class="line">&apos;MYPLAN&apos;</div><div class="line">);</div><div class="line"></div><div class="line">END</div><div class="line">;</div><div class="line">/</div></pre></td></tr></table></figure>
<p>The sessions that have the module set are subject to the restrictions as soon as the plan is activated. If a new module is set during an existing session, the session is switched into the new consumer group. The parallel restriction have precedence over parallel hints:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">SQL</div><div class="line">&gt;</div><div class="line">connect adam/adam@prima</div><div class="line"></div><div class="line">Connected.</div><div class="line">SQL</div><div class="line">&gt;</div><div class="line">select</div><div class="line">distinct</div><div class="line"> sid </div><div class="line">from</div><div class="line"> v$mystat;</div><div class="line"></div><div class="line"></div><div class="line">       SID</div><div class="line">----------</div><div class="line">	 </div><div class="line">4</div><div class="line"></div><div class="line"></div><div class="line">SQL</div><div class="line">&gt;</div><div class="line">exec dbms_application_info.set_module(module_name =</div><div class="line">&gt;</div><div class="line">&apos;A_MODULE&apos;,action_name =</div><div class="line">&gt;</div><div class="line"> &apos;A-ACTION&apos;</div><div class="line">)</div><div class="line"></div><div class="line"></div><div class="line">PL/SQL procedure successfully completed.</div><div class="line"></div><div class="line">SQL</div><div class="line">&gt;</div><div class="line">select</div><div class="line"> resource_consumer_group </div><div class="line">from</div><div class="line"> v$session </div><div class="line">where</div><div class="line"> sid=</div><div class="line">4</div><div class="line">;</div><div class="line"></div><div class="line"></div><div class="line">RESOURCE_CONSUMER_GROUP</div><div class="line">--------------------------------</div><div class="line">A_GROUP</div><div class="line"></div><div class="line">SQL</div><div class="line">&gt;</div><div class="line">select</div><div class="line"> /*+ parallel (dual,</div><div class="line">16</div><div class="line">) */ * </div><div class="line">from</div><div class="line"> dual;</div><div class="line"></div><div class="line"></div><div class="line">D</div><div class="line">-</div><div class="line">X</div><div class="line"></div><div class="line">SQL</div><div class="line">&gt;</div><div class="line">select</div><div class="line"> * </div><div class="line">from</div><div class="line"> v$pq_sesstat;</div><div class="line"> </div><div class="line"></div><div class="line">STATISTIC		       LAST_QUERY SESSION_TOTAL     CON_ID</div><div class="line">------------------------------ ---------- ------------- ----------</div><div class="line">Queries Parallelized			</div><div class="line">1</div><div class="line">1</div><div class="line">0</div><div class="line"></div><div class="line">DML Parallelized			</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">DDL Parallelized			</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">DFO Trees				</div><div class="line">1</div><div class="line">1</div><div class="line">0</div><div class="line">Server Threads				</div><div class="line">8</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">Allocation Height			</div><div class="line">8</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">Allocation Width			</div><div class="line">1</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">Local Msgs Sent 		       </div><div class="line">24</div><div class="line">24</div><div class="line">0</div><div class="line"></div><div class="line">Distr Msgs Sent 			</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">Local Msgs Recv</div><div class="line">&apos;d		       22	     22 	 0</div><div class="line"></div><div class="line">Distr Msgs Recv</div><div class="line">&apos;d			0	      0 	 0</div><div class="line"></div><div class="line">DOP					</div><div class="line">8</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">Slave Sets				</div><div class="line">1</div><div class="line">0</div><div class="line">0</div><div class="line">13</div><div class="line"> rows selected.</div><div class="line"></div><div class="line">SQL</div><div class="line">&gt;</div><div class="line">exec dbms_application_info.set_module(module_name =</div><div class="line">&gt;</div><div class="line">&apos;B_MODULE&apos;,action_name =</div><div class="line">&gt;</div><div class="line"> &apos;B-ACTION&apos;)</div><div class="line"></div><div class="line">PL/SQL procedure successfully completed.</div><div class="line"></div><div class="line">SQL</div><div class="line">&gt;</div><div class="line">select</div><div class="line"> resource_consumer_group </div><div class="line">from</div><div class="line"> v$session </div><div class="line">where</div><div class="line"> sid=</div><div class="line">4</div><div class="line">;</div><div class="line"></div><div class="line"></div><div class="line">RESOURCE_CONSUMER_GROUP</div><div class="line">--------------------------------</div><div class="line">B_GROUP</div><div class="line"></div><div class="line">SQL</div><div class="line">&gt;</div><div class="line">select</div><div class="line"> /*+ parallel (dual,</div><div class="line">16</div><div class="line">) */ * </div><div class="line">from</div><div class="line"> dual;</div><div class="line"></div><div class="line"></div><div class="line">D</div><div class="line">-</div><div class="line">X</div><div class="line"></div><div class="line">SQL</div><div class="line">&gt;</div><div class="line">select</div><div class="line"> * </div><div class="line">from</div><div class="line"> v$pq_sesstat; </div><div class="line"></div><div class="line">STATISTIC		       LAST_QUERY SESSION_TOTAL     CON_ID</div><div class="line">------------------------------ ---------- ------------- ----------</div><div class="line">Queries Parallelized			</div><div class="line">1</div><div class="line">2</div><div class="line">0</div><div class="line"></div><div class="line">DML Parallelized			</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">DDL Parallelized			</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">DFO Trees				</div><div class="line">1</div><div class="line">2</div><div class="line">0</div><div class="line">Server Threads				</div><div class="line">2</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">Allocation Height			</div><div class="line">2</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">Allocation Width			</div><div class="line">1</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">Local Msgs Sent 			</div><div class="line">8</div><div class="line">32</div><div class="line">0</div><div class="line"></div><div class="line">Distr Msgs Sent 			</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">Local Msgs Recv</div><div class="line">&apos;d			8	     30 	 0</div><div class="line"></div><div class="line">Distr Msgs Recv</div><div class="line">&apos;d			0	      0 	 0</div><div class="line"></div><div class="line">DOP					</div><div class="line">2</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">Slave Sets				</div><div class="line">1</div><div class="line">0</div><div class="line">0</div><div class="line">13</div><div class="line"> rows selected.</div></pre></td></tr></table></figure>
<p>To test the CPU restrictions, I used scripts like this:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">set</div><div class="line"> serveroutput </div><div class="line">on</div><div class="line">declare</div><div class="line"></div><div class="line">    v_starttime timestamp;</div><div class="line">    v_endtime timestamp;</div><div class="line">begin</div><div class="line">    dbms_application_info.set_module(module_name =</div><div class="line">&gt;</div><div class="line">&apos;A_MODULE&apos;,action_name =</div><div class="line">&gt;</div><div class="line"> &apos;A-ACTION&apos;);</div><div class="line"></div><div class="line">    v_starttime:=current_timestamp;</div><div class="line">    </div><div class="line">for</div><div class="line"> i </div><div class="line">in</div><div class="line">1.</div><div class="line">.1000000000</div><div class="line">loop</div><div class="line">for</div><div class="line"> j </div><div class="line">in</div><div class="line">1.</div><div class="line">.1000000000</div><div class="line">loop</div><div class="line">for</div><div class="line"> k </div><div class="line">in</div><div class="line">1.</div><div class="line">.10000</div><div class="line">loop</div><div class="line"></div><div class="line">                null;</div><div class="line">            </div><div class="line">end</div><div class="line">loop</div><div class="line">;</div><div class="line">        </div><div class="line">end</div><div class="line">loop</div><div class="line">;</div><div class="line">    </div><div class="line">end</div><div class="line">loop</div><div class="line">;</div><div class="line">    v_endtime:=current_timestamp;</div><div class="line">    dbms_output.put_line(</div><div class="line">&apos;Seconds elapsed Module A: &apos;||to_char(extract(second from v_endtime-v_starttime)));</div><div class="line">end</div><div class="line">;</div><div class="line">/</div></pre></td></tr></table></figure>
<p>With CPU_COUNT set to 1 (remember this is a dynamic parameter since 11g and this_Instance Caging_feature requires a Resource Manager plan to be active), two sessions each running scripts like that one setting module A and the other module B are enough to see the effect. On my system, both sessions need about 15 seconds without the plan while module A completes in about 10 seconds vs module B in 20 seconds with the plan active.</p>
<p>Apart from the shown restrictions, there are other useful options available like A_ctive Session Pool, Maximum Estimated Execution Time, Undo Quota_and<em>Idle Blocker Time</em>. Each of these can come in handy to tweak or troubleshoot a misbehaving application without having to touch the code. See<a href="http://docs.oracle.com/database/122/ADMIN/managing-resources-with-oracle-database-resource-manager.htm#ADMIN027">here</a>for a whole lot of more details.</p>
<p>The demo was done with 12c but works the same in 11g, probably also in 10g. As always: Don’t believe it, test it! ��</p>
<p>Source: <a href="http://www.tuicool.com/articles/hit/Ynyqiiy">http://uhesse.com/2017/08/20/combining-resource-consumer-groups-with-application-modules-in-oracle/</a></p>

  </div>
  

 <!-- jsSocials -->
<script src="/jssocials-1.4.0/jssocials.min.js"></script>
<link rel="stylesheet" href="/jssocials-1.4.0/jssocials.css">
<link rel="stylesheet" href="/jssocials-1.4.0/jssocials-theme-flat.css">

<div class="socials-share-btn"></div>
<script>
  if ($) {
    $(document).ready(function(){
      $(".socials-share-btn").jsSocials({
        shares: ["email", "twitter", "facebook", "googleplus", "linkedin", "pinterest", "stumbleupon", "whatsapp"]
      });
    })
  }
</script>


  
<section id="comments">
  <div id="disqus_thread"></div>
</section>
<script>
  var disqus_shortname = 'gmagon';
  var disqus_url = 'https://gmagon.com/blog/2017/08/21/resource-manager-on-the-command-line/index.html';
  var disqus_title = " Resource Manager on the command line";
  var disqus_config = function(){
    this.language = 'en';
  };
  (function(){
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'https://go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

  <script src="/js/audios.js"></script>
</article>

          </div>
      
          <aside id="article-toc" role="navigation">
                <div id="article-toc-inner">
                  <strong class="sidebar-title">Contents</strong>
                  
                  <a href="#" id="article-toc-top">Back to Top</a>
                </div>
          </aside>
        </div>
      </article>
    </div>
  </div>
</div>

<div class="class-content-wrap">
  <div class="inner">
    <div class="inner-wrap landing-bunting">
      <div class="intro-sub-content-wrap">
      </div>
    </div>
  </div>
</div>



    <footer id="footer" class="landing-bunting font-e3">
  <div class="inner">
    <div id="footer-some-docs">
        <a href="/terms_conditions.html" class="footer-doc-link" >Terms & Conditions</a>
        <a href="/privacy.html" class="footer-doc-link" >Privacy</a>
        <a href="/end-user-license-agreement.html" class="footer-doc-link" >License Agreement</a>
    </div>
    <div id="footer-copyright">
       <a href="" > Copyright &copy; 2017 Gmagon,Inc. All rights reserved. </a>
    </div>
  </div>

  <div class="inner">
    <div id="footer-links">
        
        <a href="https://twitter.com/gmagonshare" class="footer-link" target="_blank" rel="nofollow me noopener noreferrer" ><i class="fa fa-twitter"></i></a>
        
        <a href="https://www.facebook.com/gmagonshare" class="footer-link" target="_blank" rel="nofollow me noopener noreferrer" ><i class="fa fa-facebook"></i></a>
        <a href="https://www.youtube.com/gmagonshare" class="footer-link" target="_blank" rel="nofollow me noopener noreferrer" ><i class="fa fa-youtube"></i></a>
        <a href="https://www.instagram.com/gmagonshare" class="footer-link" target="_blank" rel="nofollow me noopener noreferrer" ><i class="fa fa-instagram"></i></a>
    </div>
  </div>


  <div class="inner">
    <div id="footer-security">
       <p>
          <img src="/asset/images/security/klogo.png">
          <img src="/asset/images/security/mcafee.png">
          <img src="/asset/images/security/cmmodo_scanned.png">
          <img src="/asset/images/security/softonic_tested.png">
          <img src="/asset/images/security/tested_by_sucuri.png">
          <img src="/asset/images/security/norton.png">
          <img src="/asset/images/security/eset_logo.png">
       </p>
    </div>
  </div>




</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/" class="mobile-nav-link ">Home</a><a href="/products/" class="mobile-nav-link ">Products</a><a href="/guide/" class="mobile-nav-link ">Guide</a><a href="/support/" class="mobile-nav-link ">Support</a><a href="/blog/" class="mobile-nav-link ">Blog</a>
      
    </ul>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>

  <!-- Scripts -->
<script src="/build/js/main-8277743eaa.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script> -->

<!-- totop -->
<div id="gmagon_totop" style="position:fixed;bottom:150px;right:30px;cursor: pointer;">
  <a title="Back to top"><img src="/asset/images/scroll-up.png"/></a>
</div>
<script src="/js/totop.js"></script>





<!-- Google Analytics -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99314951-1', 'auto');
  ga('send', 'pageview');
</script>


</body>
</html>