<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">

  <title>Vim Turing Machine: A Turing machine implemented using only normal mode vim commands - Gmagon Software - handy and professional Mac apps.</title>

  <meta http-equiv="X-UA-Compatible" content="IE=8; IE=9; IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="robots" content="noodp" />
  <meta name="keywords" content="Vim Turing Machine: A Turing machine implemented using only normal mode vim commands" />
  <meta name="description" content="Vim Turing Machine: A Turing machine implemented using only normal mode vim commands" />

  <!-- Custom config og:image -->


  <!-- Open Graph -->
<meta name="description" content="Vim Turing Machine: A Turing machine implemented using only normal mode vim commands - Gmagon Software - handy and professional Mac apps.">
<meta property="og:type" content="apps">
<meta property="og:title" content="Vim Turing Machine: A Turing machine implemented using only normal mode vim commands - Gmagon Software - handy and professional Mac apps.">
<meta property="og:url" content="https://gmagon.com/blog/2017/08/28/vim-turing-machin/index.html">
<meta property="og:site_name" content="Vim Turing Machine: A Turing machine implemented using only normal mode vim commands - Gmagon Software - handy and professional Mac apps.">
<meta property="og:description" content="Vim Turing Machine: A Turing machine implemented using only normal mode vim commands - Gmagon Software - handy and professional Mac apps.">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://s3.amazonaws.com/fullstackfeed/images/vim-2.jpg">
<meta property="og:updated_time" content="2017-08-28T12:44:03.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Vim Turing Machine: A Turing machine implemented using only normal mode vim commands - Gmagon Software - handy and professional Mac apps.">
<meta name="twitter:description" content="Vim Turing Machine: A Turing machine implemented using only normal mode vim commands - Gmagon Software - handy and professional Mac apps.">
<meta name="twitter:image" content="https://s3.amazonaws.com/fullstackfeed/images/vim-2.jpg">
<meta name="twitter:site" content="gmagonshare">
<meta property="fb:admins" content="432634277117208">
<meat name="twitter:url" content="https://gmagon.com/blog/2017/08/28/vim-turing-machin/index.html">



  <!-- algolia_config -->
  
  
  <!-- Canonical links -->
  <link rel="canonical" href="https://gmagon.com/blog/2017/08/28/vim-turing-machin/index.html">

  <!-- Alternative links -->
  

  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">

  <!-- CSS -->
  <link rel="stylesheet" href="/build/css/navy-041a6b0522.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/asset/styles/global.css">
  
  <!-- jQuery -->
  <script src="/js/jquery/jquery-3.2.1.min.js"></script>
<script src="/js/jquery/jquery-migrate-1.4.1.min.js"></script>



  <!-- ForPostLayout -->
  
    
    
  
  <!-- endForPostLayout -->

  <!-- RSS -->
  <link rel="alternate" href="/atom.xml" title="Gmagon Software - handy and professional Mac apps.">

  <!-- algolia_search -->
  <script src="/assets/algolia/algoliasearchLite.min.js" async></script>

  <!-- Github Button -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  <!-- Utils -->
<script src="/js/utils.js"></script>
</head>

<body>
  <div id="container">
    <header id="header">
  <div class="wrapper">
    <div id="header-inner" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Gmagon Software - handy and professional Mac apps.</a>
        <span>gmagon </span>
      </h1>
      <nav id="main-nav">
        <a href="/" class="main-nav-link ">Home</a><a href="/products/" class="main-nav-link ">Products</a><a href="/guide/" class="main-nav-link ">Guide</a><a href="/support/" class="main-nav-link ">Support</a><a href="/blog/" class="main-nav-link ">Blog</a>
        <div id="search-input-wrap">
          <a href="/search/" class="text-decoration-none">
            <div id="search-input-icon">
              <i class="fa fa-search"></i>
            </div>
          </a>
        </div>
      </nav>
      <div id="lang-select-wrap">
        <label id="lang-select-label"><i class="fa fa-globe"></i><span>English</span></label>
        <select id="lang-select" data-canonical="">
          
            <option value="en" selected>English</option>
          
        </select>
      </div>
      <a id="mobile-nav-toggle">
        <span class="mobile-nav-toggle-bar"></span>
        <span class="mobile-nav-toggle-bar"></span>
        <span class="mobile-nav-toggle-bar"></span>
      </a>
    </div>
  </div>  
</header>
<div class="hide-wrap-head-top"></div>

    <div class="class-content-wrap">
  <div class="inner">
    <div class="inner-wrap fill-bunting font-e3">
      <h2 id="banner-title"> Vim Turing Machine: A Turing machine implemented using only normal mode vim commands </h2>
      <div id="banner-start">
        <a class="btn btn-static-secondary btn-shadow" href="https://gitter.im/Gmagon/support" ttarget="_blank" rel="nofollow me noopener noreferrer" >Need help?</a>
      </div>
    </div>
  </div>
</div>

<div class="class-content-wrap">
  <div class="wrapper">
    <div class="inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
          <div class="hide-wrap-head-top"></div>
<article class="article post" itemscope itemtype="http://schema.org/Article">
  <header class="article-header">
    
      <h1 class="article-title" itemprop="name">Vim Turing Machine: A Turing machine implemented using only normal mode vim commands</h1>
    
    <a href="/blog/2017/08/28/vim-turing-machin/" class="article-date"><time datetime="2017-08-28T00:00:00.000Z">2017-08-28</time></a>
  </header>
  <div class="article-content" itemprop="articleBody">
    <h1 id=""><a href="#" class="headerlink" title=""></a><img src="https://s3.amazonaws.com/fullstackfeed/images/vim-2.jpg" alt=""></h1><h1 id="Vim-Turing-Machine"><a href="#Vim-Turing-Machine" class="headerlink" title="Vim Turing Machine"></a>Vim Turing Machine</h1><p>Ever wish you could run your code in your editor? Tired of installing huge dependencies like bash or python to run your scripts? Love Vim so much that you never want to leave it? Why not run your code… in your editor itself? Enter vim_turing_machine: a tool to allow you to run a Turing machine using only normal mode Vim commands.</p>
<p>And now you might ask, but what can we do on a Turing machine! To demonstrate its capabilities, we implemented a solution to the Merge Overlapping Intervals question and defined all the state transitions needed to solve this glorious problem. So next time you need to merge some intervals, don’t hand-write a 10-line python program. Instead, take out your favorite editor and watch it solve the problem in less than a minute with 1400 state transitions!</p>
<p>But a simple naysayer may say, ‘We already have vimscript! Why in God’s name would I want to use a Turing machine instead?’ To that, we retort: our Turing machine only uses normal mode. So you could theoretically just type in the program and then execute it without running a single script! No ex mode either! This project proves that normal mode in Vim is as powerful as any computer!</p>
<h1 id="Merging-your-favorite-intervals"><a href="#Merging-your-favorite-intervals" class="headerlink" title="Merging your favorite intervals"></a>Merging your favorite intervals</h1><p>Given a set of sorted potentially overlapping open/close intervals, merge the overlapping intervals together.</p>
<p>Example:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">[[1, 5], [6, 7]] -</div><div class="line">&gt;</div><div class="line"> [[1, 5], [6, 7]]</div><div class="line">[[1, 5], [2, 3], [5, 7], [12, 15]] -</div><div class="line">&gt;</div><div class="line"> [[1, 7], [12, 15]]</div></pre></td></tr></table></figure>
<p>Running the Python Turing Machine:<code>make run</code></p>
<p>Opening the Vim Turing Machine without running it:<code>make open-vim-machine</code></p>
<p>Opening and then running the Vim Turing Machine:<code>make run-vim-machine</code></p>
<h1 id="So-Vim-did-what-Wait-How-does-it-even"><a href="#So-Vim-did-what-Wait-How-does-it-even" class="headerlink" title="So Vim did what? Wait. How does it even?"></a>So Vim did what? Wait. How does it even?</h1><p>So you run this program, and it works. Great! So what happened? Well the most common thing you’re going to see is<code>y$@&quot;</code>. What this does is yank from the current cursor to the end of the line and then executes the default register as a macro. This allows us to encode motions in lines and then execute them. We then chain lines together by ending lines with moving to a mark, or a search result, and then yanking and executing that line.</p>
<p>Using that nifty trick, we begin by yanking the first line and executing it. That then sets off our mark initialization. We then search for<code>_&lt;someletter&gt;</code>and then mark that position with the corresponding letter. Generally the first initial of whatever the thing we’re marking is. Once everything is marked, we then begin the state transitions.</p>
<p>We begin a state transition by executing a long command (located at<code>_n:</code>) which jumps to the tape marker, yanks it, then jumps to the current state marker, yanks that too, and then searches for some transition that contains both the state and tape values. Once it gets to that line, it jumps to the command string and then executes our trusty<code>y$@&quot;</code>to execute it. To make sure we keep transitioning, each state transition ends with<code>`ny$@</code>which tells it to jump to our “next state” marker and then execute it again, which kicks off the search for the next state.</p>
<p>The execution halts when it can’t find a new state to transition to. The state search includes an “or” operator where it will fall back to matching<code>---</code>, which tells it to print the current state and halt.</p>
<p>Most transitions themselves involve changing a tape value or a state value and then moving in some direction on the tape. Changing values consists of jumping to the tape or state marks (<code>t``or</code>k<code>respectively\) and then using`cw`or`C`to change the value. We then move the pointer by jumping to the tape position \(```t</code>) and then moving a word forward (<code>W</code>) or backward (<code>B</code>), and then marking the new tape position.</p>
<p>The last real piece of complication is extending the tape. We’re living in a world with unlimited tapes! What a time to be alive! This is done through a series of nifty hacks. First, we have a modeline that sets<code>whichwrap+b,s</code>. This allows us to move across line breaks and keep the tape all in the screen. Next, the line directly under the tape contains a “fake” value that, when added to our state search, will prevent it from matching any real state transitions and instead match a “transition” for adding a line to the tape. This line tells us to jump to the end of the tape, and then insert a full line of empty values (we use<code>X</code>), and then go back to our original tape location and execute the next state transition!</p>
<p>And there you have it! A simple<code>ggyy@&quot;</code>will kick off all of these sequences until execution completes. The cool thing is that this isn’t special to the intervals problem. In fact, you can write your own state machine and use the provided Vim adapter to create a new Vim machine to solve any problem that can be solved by a Turing Machine!</p>
<p>To see some more details about various common commands, you can take a look at<code>vim_turing_machine/vim_constants.py</code>. That file contains some constants that are used repeatedly in the generated<code>machine.vim</code>file and their names are fairly descriptive. Also, if you’d like to step through manually, you can edit the Vim machine in<code>vim_turing_machine/machines/vim_is_number_even.py</code>and tell it not to auto step and then step through manually using<code>y$@&quot;</code>.</p>
<p>Happy hacking!</p>
<h1 id="Contributors"><a href="#Contributors" class="headerlink" title="Contributors"></a>Contributors</h1><p>eliot and ifij wrote this project in July 2017 for Yelp’s Hackathon 23. It was inspired by<a href="https://github.com/xoreaxeaxeax/vimmmex">vimmmex</a>: a Brainfuck interpretor written in Vim.</p>

  </div>
  

 <!-- jsSocials -->
<script src="/jssocials-1.4.0/jssocials.min.js"></script>
<link rel="stylesheet" href="/jssocials-1.4.0/jssocials.css">
<link rel="stylesheet" href="/jssocials-1.4.0/jssocials-theme-flat.css">

<div class="socials-share-btn"></div>
<script>
  if ($) {
    $(document).ready(function(){
      $(".socials-share-btn").jsSocials({
        shares: ["email", "twitter", "facebook", "googleplus", "linkedin", "pinterest", "stumbleupon", "whatsapp"]
      });
    })
  }
</script>


  
<section id="comments">
  <div id="disqus_thread"></div>
</section>
<script>
  var disqus_shortname = 'gmagon';
  var disqus_url = 'https://gmagon.com/blog/2017/08/28/vim-turing-machin/index.html';
  var disqus_title = "Vim Turing Machine: A Turing machine implemented using only normal mode vim commands";
  var disqus_config = function(){
    this.language = 'en';
  };
  (function(){
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'https://go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

  <script src="/js/audios.js"></script>
</article>

          </div>
      
          <aside id="article-toc" role="navigation">
                <div id="article-toc-inner">
                  <strong class="sidebar-title">Contents</strong>
                  <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Vim-Turing-Machine"><span class="toc-text">Vim Turing Machine</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Merging-your-favorite-intervals"><span class="toc-text">Merging your favorite intervals</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#So-Vim-did-what-Wait-How-does-it-even"><span class="toc-text">So Vim did what? Wait. How does it even?</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Contributors"><span class="toc-text">Contributors</span></a></li></ol>
                  <a href="#" id="article-toc-top">Back to Top</a>
                </div>
          </aside>
        </div>
      </article>
    </div>
  </div>
</div>

<div class="class-content-wrap">
  <div class="inner">
    <div class="inner-wrap landing-bunting">
      <div class="intro-sub-content-wrap">
      </div>
    </div>
  </div>
</div>



    <footer id="footer" class="landing-bunting font-e3">
  <div class="inner">
    <div id="footer-some-docs">
        <a href="/terms_conditions.html" class="footer-doc-link" >Terms & Conditions</a>
        <a href="/privacy.html" class="footer-doc-link" >Privacy</a>
        <a href="/end-user-license-agreement.html" class="footer-doc-link" >License Agreement</a>
    </div>
    <div id="footer-copyright">
       <a href="" > Copyright &copy; 2017 Gmagon,Inc. All rights reserved. </a>
    </div>
  </div>

  <div class="inner">
    <div id="footer-links">
        
        <a href="https://twitter.com/gmagonshare" class="footer-link" target="_blank" rel="nofollow me noopener noreferrer" ><i class="fa fa-twitter"></i></a>
        
        <a href="https://www.facebook.com/gmagonshare" class="footer-link" target="_blank" rel="nofollow me noopener noreferrer" ><i class="fa fa-facebook"></i></a>
        <a href="https://www.youtube.com/gmagonshare" class="footer-link" target="_blank" rel="nofollow me noopener noreferrer" ><i class="fa fa-youtube"></i></a>
        <a href="https://www.instagram.com/gmagonshare" class="footer-link" target="_blank" rel="nofollow me noopener noreferrer" ><i class="fa fa-instagram"></i></a>
    </div>
  </div>


  <div class="inner">
    <div id="footer-security">
       <p>
          <img src="/asset/images/security/klogo.png">
          <img src="/asset/images/security/mcafee.png">
          <img src="/asset/images/security/cmmodo_scanned.png">
          <img src="/asset/images/security/softonic_tested.png">
          <img src="/asset/images/security/tested_by_sucuri.png">
          <img src="/asset/images/security/norton.png">
          <img src="/asset/images/security/eset_logo.png">
       </p>
    </div>
  </div>




</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/" class="mobile-nav-link ">Home</a><a href="/products/" class="mobile-nav-link ">Products</a><a href="/guide/" class="mobile-nav-link ">Guide</a><a href="/support/" class="mobile-nav-link ">Support</a><a href="/blog/" class="mobile-nav-link ">Blog</a>
      
    </ul>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>

  <!-- Scripts -->
<script src="/build/js/main-8277743eaa.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script> -->

<!-- totop -->
<div id="gmagon_totop" style="position:fixed;bottom:150px;right:30px;cursor: pointer;">
  <a title="Back to top"><img src="/asset/images/scroll-up.png"/></a>
</div>
<script src="/js/totop.js"></script>





<!-- Google Analytics -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99314951-1', 'auto');
  ga('send', 'pageview');
</script>


</body>
</html>