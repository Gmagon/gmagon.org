<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">

  <title>Java Modularity-A Personal Journey - Gmagon Software - handy and professional Mac apps.</title>

  <meta http-equiv="X-UA-Compatible" content="IE=8; IE=9; IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="robots" content="noodp" />
  <meta name="keywords" content="Java Modularity-A Personal Journey" />
  <meta name="description" content="Java Modularity-A Personal Journey" />

  <!-- Custom config og:image -->


  <!-- Open Graph -->
<meta name="description" content="Java Modularity-A Personal Journey - Gmagon Software - handy and professional Mac apps.">
<meta property="og:type" content="apps">
<meta property="og:title" content="Java Modularity-A Personal Journey - Gmagon Software - handy and professional Mac apps.">
<meta property="og:url" content="https://gmagon.com/blog/2017/09/19/java-modularity-a-personal-journey/index.html">
<meta property="og:site_name" content="Java Modularity-A Personal Journey - Gmagon Software - handy and professional Mac apps.">
<meta property="og:description" content="Java Modularity-A Personal Journey - Gmagon Software - handy and professional Mac apps.">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://img0.tuicool.com/uA7zamV.png!web">
<meta property="og:image" content="http://img1.tuicool.com/NJjyaeb.jpg!web">
<meta property="og:image" content="http://img2.tuicool.com/NremMjA.jpg!web">
<meta property="og:image" content="http://img2.tuicool.com/2iyAvmN.png!web">
<meta property="og:image" content="http://img0.tuicool.com/NvUn6zb.png!web">
<meta property="og:image" content="http://img0.tuicool.com/FfUjaqq.png!web">
<meta property="og:image" content="http://img0.tuicool.com/JV3QB3E.png!web">
<meta property="og:image" content="http://img2.tuicool.com/fyiInmb.png!web">
<meta property="og:image" content="http://img1.tuicool.com/Ir2IFjM.png!web">
<meta property="og:image" content="http://img1.tuicool.com/MVjMFbF.png!web">
<meta property="og:image" content="http://img0.tuicool.com/uQ3EbmQ.png!web">
<meta property="og:updated_time" content="2017-09-22T09:22:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java Modularity-A Personal Journey - Gmagon Software - handy and professional Mac apps.">
<meta name="twitter:description" content="Java Modularity-A Personal Journey - Gmagon Software - handy and professional Mac apps.">
<meta name="twitter:image" content="http://img0.tuicool.com/uA7zamV.png!web">
<meta name="twitter:site" content="gmagonshare">
<meta property="fb:admins" content="432634277117208">
<meat name="twitter:url" content="https://gmagon.com/blog/2017/09/19/java-modularity-a-personal-journey/index.html">



  <!-- algolia_config -->
  
  
  <!-- Canonical links -->
  <link rel="canonical" href="https://gmagon.com/blog/2017/09/19/java-modularity-a-personal-journey/index.html">

  <!-- Alternative links -->
  

  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">

  <!-- CSS -->
  <link rel="stylesheet" href="/build/css/navy-7722a083b2.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/asset/styles/global.css">
  
  <!-- jQuery -->
  <script src="/js/jquery/jquery-3.2.1.min.js"></script>
<script src="/js/jquery/jquery-migrate-1.4.1.min.js"></script>



  <!-- ForPostLayout -->
  
    
    
  
  <!-- endForPostLayout -->

  <!-- RSS -->
  <link rel="alternate" href="/atom.xml" title="Gmagon Software - handy and professional Mac apps.">

  <!-- algolia_search -->
  <script src="/assets/algolia/algoliasearchLite.min.js" async></script>

  <!-- Utils -->
<script src="/js/utils.js"></script>
</head>

<body>
  <div id="container">
    <header id="header">
  <div class="wrapper">
    <div id="header-inner" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Gmagon Software - handy and professional Mac apps.</a>
        <span>gmagon </span>
      </h1>
      <nav id="main-nav">
        <a href="/" class="main-nav-link ">Home</a><a href="/products/" class="main-nav-link ">Products</a><a href="/guide/" class="main-nav-link ">Guide</a><a href="/support/" class="main-nav-link ">Support</a><a href="/blog/" class="main-nav-link ">Blog</a>
        <div id="search-input-wrap">
          <a href="/search/" class="text-decoration-none ">
            <div id="search-input-icon">
              <i class="fa fa-search"></i>
            </div>
          </a>
        </div>
      </nav>
      <div id="lang-select-wrap">
        <label id="lang-select-label"><i class="fa fa-globe"></i><span>English</span></label>
        <select id="lang-select" data-canonical="">
          
            <option value="en" selected>English</option>
          
        </select>
      </div>
      <a id="mobile-nav-toggle">
        <span class="mobile-nav-toggle-bar"></span>
        <span class="mobile-nav-toggle-bar"></span>
        <span class="mobile-nav-toggle-bar"></span>
      </a>
    </div>
  </div>  
</header>
<div class="hide-wrap-head-top"></div>
    <div class="class-content-wrap">
  <div class="inner">
    <div class="inner-wrap fill-bunting font-e3">
      <h2 id="banner-title"> Java Modularity-A Personal Journey </h2>
      <div id="banner-start">
        <a class="btn btn-static-secondary btn-shadow" href="https://gitter.im/Gmagon/support" ttarget="_blank" rel="nofollow me noopener noreferrer" >Need help?</a>
      </div>
    </div>
  </div>
</div>

<div class="class-content-wrap">
  <div class="wrapper">
    <div class="inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
          <div class="hide-wrap-head-top"></div>
<article class="article post" itemscope itemtype="http://schema.org/Article">
  <header class="article-header">
    
      <h1 class="article-title" itemprop="name">Java Modularity-A Personal Journey</h1>
    
    <a href="/blog/2017/09/19/java-modularity-a-personal-journey/" class="article-date"><time datetime="2017-09-19T00:00:00.000Z">2017-09-19</time></a>
  </header>
  <div class="article-content" itemprop="articleBody">
    
    <div class="post-authors">
      <table class="app-download-table"> 
      <thead> 
        <tr> 
        <th>Article Media</th> 
        <th>Links</th> 
        </tr> 
      </thead> 
      <tbody> 
        <tr> 
        <td class="app-download-version">FaceBook</td> 
        <td class="on elevation1"><a href="https://www.facebook.com/groups/winandmac">https://www.facebook.com/groups/winandmac </a></td> 
        </tr> 
        <tr> 
        <td class="app-download-version">Twitter</td> 
        <td class="on elevation1"><a href="https://twitter.com/gmagonshare">https://twitter.com/gmagonshare </a></td> 
        </tr> 
      </tbody> 
      </table>
    </div>
    <p>Java 9 was delayed so many times because of Project Jigsaw, and you might have been hearing a lot about modules, modularity, and other stuff, so what it’s all about? What the heck is modularization and what do we mean by a modularized platform? What’s the Java Platform Module System (JPMS) all about? Is it going to be a revolution in Java ecosystem?</p>
<p>This post is my exploration of the most important thing that happened to the JDK, the module system. I will explain what modularization is, why you need it, and how you can create your modularized project.</p>
<p><img src="http://img0.tuicool.com/uA7zamV.png!web" alt=""></p>
<h2 id="What-and-Why"><a href="#What-and-Why" class="headerlink" title="What and Why"></a>What and Why</h2><p>Maintainability is one of the most significant concerns in software design and evolution. We want a code base that is loosely coupled, highly cohesive, extremely readable, and can be understandable at a glance. We design our classes and organize them in packages. So far so good, but when we have hundreds of packages, thedependencies between them are not visible at one look. Therefore, we need something more than packages to organize our code base to make it more maintainable.</p>
<p>Another problem is the Java classpath and how it runs our codes. All JAR classes and libraries are flattened into the classpath. When these JAR files have multiple version of a class on the runtime, the Java ClassLoader can load only one version of that class. In this way, there is ambiguity about how your program is going to work, and ambiguity is a bad thing. This issue is so frequent that you might know it as “JAR Hell.”</p>
<p>Another problem with the classpath is that it doesn’t follow the “Fail First” principle. You may have missing classes that exist in the classpath, but not in the production environment. Until you get the<strong>JavaClassDefError exception at runtime</strong>, you can’t be sure what is missing. Finally, the big issue with the classpath is encapsulation. Every class on the classpath has access to each other, and this is an encapsulation violation. We want to hide our internal APIs, and that’s why we need another level of encapsulation (“<strong>Strong Encapsulation</strong>”) and control over the access to our classes in our packages.</p>
<p>Modules are going to fix these issues. What is a module? A module has a name, it groups related code, and is self-contained. A module describes explicitly what it needs from other modules and which part of it is visible to other modules. In this manner, dependencies between modules are crystal clear. We have Strong Encapsulation, which means we can hide our internal APIs, and finally, we now follow the “Fail First” principle. Therefore, when there is a missing module or a conflict, you will get an error.</p>
<p><img src="http://img1.tuicool.com/NJjyaeb.jpg!web" alt=""></p>
<p>Modularizing the JDK allows JDK developers to manage the huge complexity of it. When you write a tiny and straightforward application that doesn’t use RMI, CORBA, Java EE, and other stuff, why do you need a full, huge, and heavy JRE? Isn’t it wiser to have your runtime image only contain the modules you need? Now with a modularized platform, it’s possible.</p>
<p><img src="http://img2.tuicool.com/NremMjA.jpg!web" alt=""></p>
<p>This is how the JDK now looks. On the bottom, we have the “java.base” module that every other module implicitly or explicitly depends on. As you can see, this dependency graph is a<a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph">DAG</a>, which means no circular dependencies allowed.</p>
<p>The picture below shows essentially what a module is. Each module has a module descriptor called “module-info.java.”</p>
<p><img src="http://img2.tuicool.com/2iyAvmN.png!web" alt="">In the module-info.java file, you describe the name of your module, what it requires to work, and which packages are visible outside this module. For example, you can see what packages<a href="http://download.java.net/java/jdk9/docs/api/java.sql-summary.html">java.sql</a>exports (makes visible) and which modules it requires.</p>
<p><img src="http://img0.tuicool.com/NvUn6zb.png!web" alt=""></p>
<p>So in its simplest form, the module-info.java looks like the image below:</p>
<p><img src="http://img0.tuicool.com/FfUjaqq.png!web" alt=""></p>
<p>In the next section, I will show how you can work with these modules and create your own modules.</p>
<h2 id="How"><a href="#How" class="headerlink" title="How"></a>How</h2><p>First of all, you need to download and install Java 9. You can find it<a href="http://jdk.java.net/9/">here</a>.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ java -version</div><div class="line">java version &quot;9&quot;</div><div class="line">Java(TM) SE Runtime Environment (build 9+181)</div><div class="line">Java HotSpot(TM) 64-Bit Server VM (build 9+181, mixed mode</div></pre></td></tr></table></figure>
<p>Let’s build a project in IntelliJ IDEA:</p>
<p><img src="http://img0.tuicool.com/JV3QB3E.png!web" alt=""></p>
<p>The picture below shows how to create a module:</p>
<p><img src="http://img2.tuicool.com/fyiInmb.png!web" alt=""></p>
<p>After creating a module, you need to create a module-info.java file inside the src:</p>
<p><img src="http://img1.tuicool.com/Ir2IFjM.png!web" alt=""></p>
<p>I’ve built a project that has two modules: “com.mhrimaz.gui” and “com.mhrimaz.logic.” You can see the structure of the project in the image:</p>
<p><img src="http://img1.tuicool.com/MVjMFbF.png!web" alt=""></p>
<p>In the com.mhrimaz.logic module, I have two classes called “InternalGreeting” and “Greeting.”</p>
<p>InternalGreeting.java:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">package com.mhrimaz.logic.internals;</div><div class="line"></div><div class="line">public class InternalGreeting &#123;</div><div class="line">public static String sayHello(String name)&#123;</div><div class="line">return &quot;Hello. This Greeting is internal dear &quot;+ name;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Greeting.java:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">package com.mhrimaz.logic;</div><div class="line"></div><div class="line">public class Greeting &#123;</div><div class="line">public static String sayHello(String name)&#123;</div><div class="line">return &quot;Hello, &quot; + name;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The module-info.java of com.mhrimaz.logic, is the following:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">module com.mhrimaz.logic &#123;</div><div class="line">exports com.mhrimaz.logic;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This means the package com.mhrimaz.logic (it’s a package name, not a module name — don’t confuse them) is visible outside this module, but the package com.mhrimaz.logic.internals is not visible.</p>
<p>The MainApplication file is a simple JavaFX program:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">package com.mhrimaz.gui;</div><div class="line"></div><div class="line">import com.mhrimaz.logic.Greeting;</div><div class="line">import javafx.application.Application;</div><div class="line">import javafx.scene.Scene;</div><div class="line">import javafx.scene.control.Label;</div><div class="line">import javafx.scene.layout.StackPane;</div><div class="line">import javafx.stage.Stage;</div><div class="line"></div><div class="line">public class MainApplication extends Application &#123;</div><div class="line"></div><div class="line"></div><div class="line">@Override</div><div class="line">public void start(Stage primaryStage) throws Exception &#123;</div><div class="line">Label label = new Label(Greeting.sayHello(&quot;Hossein&quot;));</div><div class="line">StackPane pane = new StackPane();</div><div class="line">pane.getChildren().add(label);</div><div class="line"></div><div class="line">Scene scene = new Scene(pane);</div><div class="line">primaryStage.setScene(scene);</div><div class="line">primaryStage.show();</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>It seems that this package doesn’t need to export anything. It only requires javafx.base and javafx.controls, and, in order to use the Greeting class, we also should require com.mhrimaz.logic. The module-info of the com.mhrimaz.gui module looks like this:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">module com.mhrimaz.gui &#123;</div><div class="line">requires javafx.base;</div><div class="line">requires javafx.controls;</div><div class="line">requires com.mhrimaz.logic;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>When we run our application, we will get an exception:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Caused by: java.lang.IllegalAccessException: class com.sun.javafx.application.LauncherImpl</div><div class="line">(in module javafx.graphics) cannot access class com.mhrimaz.gui.MainApplication</div><div class="line">(in module com.mhrimaz.gui) because module com.mhrimaz.gui does not export com.mhrimaz.gui to module javafx.graphics</div></pre></td></tr></table></figure>
<p>Obviously, it tells that we need to export the com.mhrimaz.gui package. This means javafx.graphics uses MainApplication to pass the Stage to it, and you need to export your package to javafx.graphics. (Note: You can only export a package to specific module or export it to all modules.)</p>
<p>So now module-info.java looks like this:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">module com.mhrimaz.gui &#123;</div><div class="line">requires javafx.base;</div><div class="line">requires javafx.controls;</div><div class="line">requires com.mhrimaz.logic;</div><div class="line">exports com.mhrimaz.gui to javafx.graphics;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The result seems like a bug in a JavaFX implementation in Java 9, but this is our result:</p>
<p><img src="http://img0.tuicool.com/uQ3EbmQ.png!web" alt=""></p>
<p>The story doesn’t end here, There is a whole lot of details about modules and the dependencies between them that you can read in<a href="http://www.apress.com/us/book/9781484225912">Java 9 Revealed</a>or the <a href="http://shop.oreilly.com/product/0636920049494.do">Java 9 Modularity</a>book.</p>
<p>Source: <a href="https://dzone.com/articles/java-modularity-a-personal-journey">https://dzone.com/articles/java-modularity-a-personal-journey</a></p>

  </div>
  

 <!-- jsSocials -->
<script src="/jssocials-1.4.0/jssocials.min.js"></script>
<link rel="stylesheet" href="/jssocials-1.4.0/jssocials.css">
<link rel="stylesheet" href="/jssocials-1.4.0/jssocials-theme-flat.css">

<div class="socials-share-btn"></div>
<script>
  if ($) {
    $(document).ready(function(){
      $(".socials-share-btn").jsSocials({
        shares: ["email", "twitter", "facebook", "googleplus", "linkedin", "pinterest", "stumbleupon", "whatsapp"]
      });
    })
  }
</script>


  
<section id="comments">
  <div id="disqus_thread"></div>
</section>
<script>
  var disqus_shortname = 'gmagon';
  var disqus_url = 'https://gmagon.com/blog/2017/09/19/java-modularity-a-personal-journey/index.html';
  var disqus_title = "Java Modularity-A Personal Journey";
  var disqus_config = function(){
    this.language = 'en';
  };
  (function(){
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'https://go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

  <script src="/js/audios.js"></script>
</article>

          </div>
      
          <aside id="article-toc" role="navigation">
                <div id="article-toc-inner">
                  <strong class="sidebar-title">Contents</strong>
                  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#What-and-Why"><span class="toc-text">What and Why</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How"><span class="toc-text">How</span></a></li></ol>
                  <a href="#" id="article-toc-top">Back to Top</a>
                </div>
          </aside>
        </div>
      </article>
    </div>
  </div>
</div>



    <footer id="footer" class="font-e3">
  <div class="inner">
    <div id="footer-some-docs">
        <a href="/terms_conditions.html" class="footer-doc-link" >Terms & Conditions</a>
        <a href="/privacy.html" class="footer-doc-link" >Privacy</a>
        <a href="/end-user-license-agreement.html" class="footer-doc-link" >License Agreement</a>
    </div>
    <div id="footer-copyright">
       <a href="" > Copyright &copy; 2017 Gmagon,Inc. All rights reserved. </a>
    </div>
  </div>

  <div class="inner">
    <div id="footer-links">
        
        <a href="https://twitter.com/gmagonshare" class="footer-link" target="_blank" rel="nofollow me noopener noreferrer" ><i class="fa fa-twitter"></i></a>
        
        <a href="https://www.facebook.com/gmagonshare" class="footer-link" target="_blank" rel="nofollow me noopener noreferrer" ><i class="fa fa-facebook"></i></a>
        <a href="https://www.youtube.com/gmagonshare" class="footer-link" target="_blank" rel="nofollow me noopener noreferrer" ><i class="fa fa-youtube"></i></a>
        <a href="https://www.instagram.com/gmagonshare" class="footer-link" target="_blank" rel="nofollow me noopener noreferrer" ><i class="fa fa-instagram"></i></a>
    </div>
  </div>


  <div class="inner">
    <div id="footer-security">
       <p>
          <img src="/asset/images/security/klogo.png">
          <img src="/asset/images/security/mcafee.png">
          <img src="/asset/images/security/cmmodo_scanned.png">
          <img src="/asset/images/security/softonic_tested.png">
          <img src="/asset/images/security/tested_by_sucuri.png">
          <img src="/asset/images/security/norton.png">
          <img src="/asset/images/security/eset_logo.png">
       </p>
    </div>
  </div>




</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/" class="mobile-nav-link ">Home</a><a href="/products/" class="mobile-nav-link ">Products</a><a href="/guide/" class="mobile-nav-link ">Guide</a><a href="/support/" class="mobile-nav-link ">Support</a><a href="/blog/" class="mobile-nav-link ">Blog</a>
      
    </ul>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>

  <!-- Scripts -->
<script src="/build/js/main-8277743eaa.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script> -->

<!-- totop -->
<div id="gmagon_totop" style="position:fixed;bottom:150px;right:30px;cursor: pointer;">
  <a title="Back to top"><img src="/asset/images/scroll-up.png"/></a>
</div>
<script src="/js/totop.js"></script>





<!-- Google Analytics -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  try{
    ga('create', 'UA-99314951-1', 'auto');
    ga('send', 'pageview');
    ga('send', 'https://gmagon.com/blog/2017/09/19/java-modularity-a-personal-journey/index.html');
    ga('send', 'Java Modularity-A Personal Journey')
  }catch(e){}

</script>


</body>
</html>